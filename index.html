<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineering Student Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        /* Navigation Bar - Bottom */
        .navbar {
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding-bottom: env(safe-area-inset-bottom); /* For iPhone notch */
        }

        .nav-container {
            max-width: 100%;
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 8px 5px;
            height: auto;
        }

        .nav-brand {
            display: none; /* Hide on mobile, show in page headers */
        }

        .nav-links {
            display: flex;
            width: 100%;
            justify-content: space-around;
        }

        .nav-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px 4px;
            background: transparent;
            border: none;
            color: #999;
            font-size: 10px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            flex: 1;
            max-width: 80px;
        }

        .nav-link-icon {
            font-size: 24px;
            transition: transform 0.3s;
        }

        .nav-link:hover .nav-link-icon {
            transform: scale(1.1);
        }

        .nav-link.active {
            color: #667eea;
        }

        .nav-link.active .nav-link-icon {
            transform: scale(1.15);
        }

        /* Page Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 100px; /* Space for bottom nav */
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .page-header {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .page-header h1 {
            color: #667eea;
            margin-bottom: 5px;
            font-size: 28px;
        }

        .page-header p {
            color: #666;
        }

        /* Card Styles */
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .card-icon {
            font-size: 24px;
            margin-right: 12px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }

        /* Form Elements */
        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .input-group input, 
        .input-group select, 
        .input-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .input-group input:focus, 
        .input-group select:focus, 
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.3s;
        }

        button:hover {
            background: #5568d3;
        }

        button.delete-btn {
            background: #e74c3c;
            padding: 5px 10px;
            font-size: 12px;
        }

        button.delete-btn:hover {
            background: #c0392b;
        }

        button.edit-btn {
            background: #3498db;
            padding: 5px 10px;
            font-size: 12px;
        }

        button.edit-btn:hover {
            background: #2980b9;
        }

        /* GPA Display */
        .gpa-display {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            color: white;
            margin-top: 20px;
        }

        .gpa-number {
            font-size: 48px;
            font-weight: bold;
            margin: 10px 0;
        }

        /* Item Cards */
        .course-item, 
        .assignment-item, 
        .schedule-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .priority-high {
            border-left: 4px solid #e74c3c;
        }

        .priority-medium {
            border-left: 4px solid #f39c12;
        }

        .priority-low {
            border-left: 4px solid #27ae60;
        }

        .completed {
            opacity: 0.6;
            text-decoration: line-through;
        }

        .alarm-badge {
            background: #e74c3c;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            margin-left: 5px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            user-select: none;
        }

        /* Timer */
        .timer-display {
            text-align: center;
            font-size: 64px;
            font-weight: bold;
            color: #667eea;
            margin: 30px 0;
            font-family: 'Courier New', monospace;
        }

        .timer-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }

        /* Formulas */
        .category-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .tab-btn {
            flex: 1;
            min-width: 100px;
            padding: 10px 15px;
            background: #f8f9fa;
            color: #333;
            border: 2px solid transparent;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-btn:hover {
            background: #e9ecef;
        }

        .tab-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .formula-category {
            display: none;
        }

        .formula-category.active {
            display: block;
        }

        .formula-card {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            position: relative;
        }

        .formula-card strong {
            color: #667eea;
        }

        .edit-formula-btn {
            background: transparent;
            color: #667eea;
            border: none;
            padding: 2px 8px;
            font-size: 14px;
            cursor: pointer;
            float: right;
            transition: transform 0.2s;
        }

        .edit-formula-btn:hover {
            transform: scale(1.2);
            background: transparent;
        }

        /* Notes */
        .note-card {
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            overflow: hidden;
        }

        .note-card.branch-electricity {
            border-left-color: #667eea;
        }

        .note-card.branch-motion {
            border-left-color: #3498db;
        }

        .note-card.branch-energy {
            border-left-color: #f39c12;
        }

        .note-card.branch-fluids {
            border-left-color: #3498db;
        }

        .note-card.branch-materials {
            border-left-color: #95a5a6;
        }

        .note-card.branch-thermo {
            border-left-color: #e74c3c;
        }

        .note-card.branch-general {
            border-left-color: #9b59b6;
        }

        .note-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            cursor: pointer;
            user-select: none;
        }

        .note-card-header:hover {
            background: #e9ecef;
        }

        .note-card-title-section {
            flex: 1;
        }

        .note-card-title {
            font-weight: 600;
            color: #333;
            font-size: 16px;
            margin-bottom: 3px;
        }

        .note-branch-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            margin-left: 8px;
            text-transform: uppercase;
        }

        .note-branch-badge.branch-electricity {
            background: #667eea;
            color: white;
        }

        .note-branch-badge.branch-motion {
            background: #3498db;
            color: white;
        }

        .note-branch-badge.branch-energy {
            background: #f39c12;
            color: white;
        }

        .note-branch-badge.branch-fluids {
            background: #3498db;
            color: white;
        }

        .note-branch-badge.branch-materials {
            background: #95a5a6;
            color: white;
        }

        .note-branch-badge.branch-thermo {
            background: #e74c3c;
            color: white;
        }

        .note-branch-badge.branch-general {
            background: #9b59b6;
            color: white;
        }

        .note-card-date {
            color: #999;
            font-size: 12px;
        }

        .note-filter-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .note-filter-btn {
            padding: 8px 16px;
            background: #f8f9fa;
            color: #666;
            border: 2px solid transparent;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .note-filter-btn:hover {
            background: #e9ecef;
        }

        .note-filter-btn.active {
            color: white;
        }

        .note-filter-btn.all.active {
            background: #667eea;
            border-color: #667eea;
        }

        .note-filter-btn.electricity.active {
            background: #667eea;
            border-color: #667eea;
        }

        .note-filter-btn.motion.active {
            background: #3498db;
            border-color: #3498db;
        }

        .note-filter-btn.energy.active {
            background: #f39c12;
            border-color: #f39c12;
        }

        .note-filter-btn.fluids.active {
            background: #3498db;
            border-color: #3498db;
        }

        .note-filter-btn.materials.active {
            background: #95a5a6;
            border-color: #95a5a6;
        }

        .note-filter-btn.thermo.active {
            background: #e74c3c;
            border-color: #e74c3c;
        }

        .note-filter-btn.general.active {
            background: #9b59b6;
            border-color: #9b59b6;
        }

        .note-expand-icon {
            font-size: 20px;
            color: #667eea;
            transition: transform 0.3s;
        }

        .note-card.expanded .note-expand-icon {
            transform: rotate(180deg);
        }

        .note-card-content {
            padding: 0 15px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .note-card.expanded .note-card-content {
            max-height: 500px;
            padding: 15px;
            padding-top: 0;
        }

        .note-card-text {
            color: #555;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-bottom: 10px;
        }

        .note-actions {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .note-actions button {
            padding: 5px 12px;
            font-size: 12px;
        }

        .notes-area {
            width: 100%;
            min-height: 150px;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            resize: vertical;
            font-family: inherit;
        }

        /* Quick Links */
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .quick-link {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: background 0.3s;
        }

        .quick-link:hover {
            background: #667eea;
            color: white;
        }

        /* Modal for custom formula category */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }

        .modal-close {
            float: right;
            font-size: 28px;
            cursor: pointer;
            color: #999;
        }

        .modal-close:hover {
            color: #333;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                padding-bottom: 90px;
            }

            .page-header h1 {
                font-size: 22px;
            }

            .page-header p {
                font-size: 14px;
            }

            .timer-display {
                font-size: 48px;
            }

            .gpa-number {
                font-size: 36px;
            }

            .stat-number {
                font-size: 24px;
            }

            .tab-btn {
                min-width: 70px;
                padding: 8px 8px;
                font-size: 11px;
            }

            .nav-link {
                font-size: 9px;
            }

            .nav-link-icon {
                font-size: 22px;
            }
        }

        @media (min-width: 769px) {
            .nav-link {
                font-size: 11px;
            }
            
            .container {
                padding-bottom: 100px;
            }
        }
    </style>
</head>
<body>
    <!-- Bottom Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-links">
                <button class="nav-link active" onclick="showPage('gpa')">
                    <div class="nav-link-icon">üìä</div>
                    <div>GPA</div>
                </button>
                <button class="nav-link" onclick="showPage('assignments')">
                    <div class="nav-link-icon">üìù</div>
                    <div>Tasks</div>
                </button>
                <button class="nav-link" onclick="showPage('timer')">
                    <div class="nav-link-icon">‚è±Ô∏è</div>
                    <div>Timer</div>
                </button>
                <button class="nav-link" onclick="showPage('schedule')">
                    <div class="nav-link-icon">üìÖ</div>
                    <div>Schedule</div>
                </button>
                <button class="nav-link" onclick="showPage('formulas')">
                    <div class="nav-link-icon">üßÆ</div>
                    <div>Formulas</div>
                </button>
                <button class="nav-link" onclick="showPage('notes')">
                    <div class="nav-link-icon">üìã</div>
                    <div>Notes</div>
                </button>
                <button class="nav-link" onclick="showPage('links')">
                    <div class="nav-link-icon">üîó</div>
                    <div>Links</div>
                </button>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- GPA Calculator Page -->
        <div id="gpa" class="page active">
            <div class="page-header">
                <h1>üìä GPA Calculator</h1>
                <p>Track your courses and calculate your GPA</p>
            </div>

            <div class="card">
                <div class="input-group">
                    <label>Course Name</label>
                    <input type="text" id="courseName" placeholder="e.g., Thermodynamics">
                </div>
                <div class="input-group">
                    <label>Grade</label>
                    <select id="courseGrade">
                        <option value="4.0">A (4.0)</option>
                        <option value="3.7">A- (3.7)</option>
                        <option value="3.3">B+ (3.3)</option>
                        <option value="3.0">B (3.0)</option>
                        <option value="2.7">B- (2.7)</option>
                        <option value="2.3">C+ (2.3)</option>
                        <option value="2.0">C (2.0)</option>
                        <option value="1.7">C- (1.7)</option>
                        <option value="1.3">D+ (1.3)</option>
                        <option value="1.0">D (1.0)</option>
                        <option value="0.0">F (0.0)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Credit Hours</label>
                    <input type="number" id="courseCredits" value="3" min="1" max="6">
                </div>
                <button onclick="addCourse()">Add Course</button>
                <div id="courseList" style="margin-top: 20px;"></div>
                <div class="gpa-display">
                    <div>Current GPA</div>
                    <div class="gpa-number" id="gpaDisplay">0.00</div>
                    <div>Total Credits: <span id="totalCredits">0</span></div>
                </div>
            </div>
        </div>

        <!-- Assignments Page -->
        <div id="assignments" class="page">
            <div class="page-header">
                <h1>üìù Assignment Tracker</h1>
                <p>Keep track of your deadlines and priorities</p>
            </div>

            <div class="card">
                <div class="input-group">
                    <label>Assignment Name</label>
                    <input type="text" id="assignmentName" placeholder="e.g., Fluid Mechanics Lab Report">
                </div>
                <div class="input-group">
                    <label>Course</label>
                    <input type="text" id="assignmentCourse" placeholder="e.g., ME 301">
                </div>
                <div class="input-group">
                    <label>Due Date</label>
                    <input type="date" id="assignmentDue">
                </div>
                <div class="input-group">
                    <label>Priority</label>
                    <select id="assignmentPriority">
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="assignmentAlarm" checked>
                    <label for="assignmentAlarm">üîî Set reminder notification for this deadline</label>
                </div>
                <button onclick="addAssignment()">Add Assignment</button>
                <div id="assignmentList" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Timer Page -->
        <div id="timer" class="page">
            <div class="page-header">
                <h1>‚è±Ô∏è Study Timer</h1>
                <p>Pomodoro technique to boost productivity</p>
            </div>

            <div class="card">
                <div class="timer-display" id="timerDisplay">25:00</div>
                <div class="timer-controls">
                    <button onclick="startTimer()">‚ñ∂Ô∏è Start</button>
                    <button onclick="pauseTimer()">‚è∏Ô∏è Pause</button>
                    <button onclick="resetTimer()">üîÑ Reset</button>
                </div>
                <div class="input-group" style="margin-top: 20px;">
                    <label>Session Type</label>
                    <select id="sessionType" onchange="changeSessionType()">
                        <option value="25">Study (25 min)</option>
                        <option value="5">Short Break (5 min)</option>
                        <option value="15">Long Break (15 min)</option>
                    </select>
                </div>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-number" id="sessionsCompleted">0</div>
                        <div class="stat-label">Sessions Today</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="studyTime">0</div>
                        <div class="stat-label">Hours This Week</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schedule Page -->
        <div id="schedule" class="page">
            <div class="page-header">
                <h1>üìÖ Weekly Schedule</h1>
                <p>Organize your weekly classes and events</p>
            </div>

            <div class="card">
                <div class="input-group">
                    <label>Class/Event</label>
                    <input type="text" id="scheduleName" placeholder="e.g., Calculus III">
                </div>
                <div class="input-group">
                    <label>Day</label>
                    <select id="scheduleDay">
                        <option value="Monday">Monday</option>
                        <option value="Tuesday">Tuesday</option>
                        <option value="Wednesday">Wednesday</option>
                        <option value="Thursday">Thursday</option>
                        <option value="Friday">Friday</option>
                        <option value="Saturday">Saturday</option>
                        <option value="Sunday">Sunday</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Time</label>
                    <input type="time" id="scheduleTime">
                </div>
                <div class="input-group">
                    <label>Location</label>
                    <input type="text" id="scheduleLocation" placeholder="e.g., Engineering Hall 301">
                </div>
                <button onclick="addScheduleItem()">Add to Schedule</button>
                <div id="scheduleList" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Formulas Page -->
        <div id="formulas" class="page">
            <div class="page-header">
                <h1>üßÆ Quick Reference Formulas</h1>
                <p>Essential engineering formulas at your fingertips</p>
            </div>

            <div class="card">
                <div class="category-tabs">
                    <button class="tab-btn active" onclick="showFormulaCategory('electricity')">‚ö° Electricity</button>
                    <button class="tab-btn" onclick="showFormulaCategory('motion')">üöÄ Motion</button>
                    <button class="tab-btn" onclick="showFormulaCategory('energy')">üí° Energy</button>
                    <button class="tab-btn" onclick="showFormulaCategory('fluids')">üíß Fluids</button>
                    <button class="tab-btn" onclick="showFormulaCategory('materials')">üîß Materials</button>
                    <button class="tab-btn" onclick="showFormulaCategory('thermo')">üî• Thermo</button>
                    <button class="tab-btn" onclick="showFormulaCategory('custom')">‚ûï Custom</button>
                </div>

                <div id="electricity" class="formula-category active" data-category="electricity"></div>
                <div id="motion" class="formula-category" data-category="motion"></div>
                <div id="energy" class="formula-category" data-category="energy"></div>
                <div id="fluids" class="formula-category" data-category="fluids"></div>
                <div id="materials" class="formula-category" data-category="materials"></div>
                <div id="thermo" class="formula-category" data-category="thermo"></div>

                <div id="custom" class="formula-category">
                    <div class="input-group">
                        <label>Formula Name</label>
                        <input type="text" id="customFormulaName" placeholder="e.g., Reynolds Number">
                    </div>
                    <div class="input-group">
                        <label>Formula</label>
                        <input type="text" id="customFormulaText" placeholder="e.g., Re = œÅvD/Œº">
                    </div>
                    <div class="input-group">
                        <label>Category</label>
                        <select id="customFormulaCategory">
                            <option value="new">‚ûï Create New Category</option>
                            <option value="electricity">‚ö° Electricity</option>
                            <option value="motion">üöÄ Motion</option>
                            <option value="energy">üí° Energy</option>
                            <option value="fluids">üíß Fluids</option>
                            <option value="materials">üîß Materials</option>
                            <option value="thermo">üî• Thermo</option>
                        </select>
                    </div>
                    <div class="input-group" id="newCategoryGroup" style="display: none;">
                        <label>New Category Name</label>
                        <input type="text" id="newCategoryName" placeholder="e.g., Aerodynamics">
                    </div>
                    <button onclick="addCustomFormula()">Add Custom Formula</button>
                    <div id="customCategoriesList" style="margin-top: 20px;"></div>
                </div>
            </div>
        </div>

        <!-- Notes Page -->
        <div id="notes" class="page">
            <div class="page-header">
                <h1>üìã Notes</h1>
                <p>Organize your study notes and reminders</p>
            </div>

            <div class="card">
                <div class="input-group">
                    <label>Note Title</label>
                    <input type="text" id="noteTitle" placeholder="e.g., Ohm's Law Examples">
                </div>
                <div class="input-group">
                    <label>Subject/Branch</label>
                    <select id="noteBranch">
                        <option value="electricity">‚ö° Electricity</option>
                        <option value="motion">üöÄ Motion</option>
                        <option value="energy">üí° Energy</option>
                        <option value="fluids">üíß Fluids</option>
                        <option value="materials">üîß Materials</option>
                        <option value="thermo">üî• Thermodynamics</option>
                        <option value="general">üìö General</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Note Content</label>
                    <textarea class="notes-area" id="noteContent" placeholder="Write your note here..."></textarea>
                </div>
                <button onclick="addNote()">Save Note</button>
                
                <div class="note-filter-tabs" id="noteFilterTabs" style="margin-top: 30px;">
                    <button class="note-filter-btn all active" onclick="filterNotes('all')">All</button>
                    <button class="note-filter-btn electricity" onclick="filterNotes('electricity')">‚ö° Electricity</button>
                    <button class="note-filter-btn motion" onclick="filterNotes('motion')">üöÄ Motion</button>
                    <button class="note-filter-btn energy" onclick="filterNotes('energy')">üí° Energy</button>
                    <button class="note-filter-btn fluids" onclick="filterNotes('fluids')">üíß Fluids</button>
                    <button class="note-filter-btn materials" onclick="filterNotes('materials')">üîß Materials</button>
                    <button class="note-filter-btn thermo" onclick="filterNotes('thermo')">üî• Thermo</button>
                    <button class="note-filter-btn general" onclick="filterNotes('general')">üìö General</button>
                </div>
                
                <div id="notesList" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Links Page -->
        <div id="links" class="page">
            <div class="page-header">
                <h1>üîó Quick Links</h1>
                <p>Essential tools and resources</p>
            </div>

            <div class="card">
                <div class="quick-links">
                    <a href="https://www.wolframalpha.com/" target="_blank" class="quick-link">üßÆ WolframAlpha</a>
                    <a href="https://www.desmos.com/calculator" target="_blank" class="quick-link">üìà Desmos</a>
                    <a href="https://www.mathway.com/" target="_blank" class="quick-link">‚ûó Mathway</a>
                    <a href="https://www.symbolab.com/" target="_blank" class="quick-link">‚à´ Symbolab</a>
                    <a href="https://www.khanacademy.org/" target="_blank" class="quick-link">üéì Khan Academy</a>
                    <a href="https://www.coursera.org/" target="_blank" class="quick-link">üìö Coursera</a>
                    <a href="https://github.com/" target="_blank" class="quick-link">üíª GitHub</a>
                    <a href="https://stackoverflow.com/" target="_blank" class="quick-link">‚ùì Stack Overflow</a>
                    <a href="https://www.mit.edu/~anugrah/MITHandbook2021-22.pdf" target="_blank" class="quick-link">üìñ MIT Handbook</a>
                    <a href="https://www.engineeringtoolbox.com/" target="_blank" class="quick-link">üîß Eng Toolbox</a>
                    <a href="https://www.youtube.com/@3blue1brown" target="_blank" class="quick-link">üì∫ 3Blue1Brown</a>
                    <a href="https://ocw.mit.edu/" target="_blank" class="quick-link">üèõÔ∏è MIT OCW</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test localStorage availability
        function testLocalStorage() {
            try {
                const test = 'test';
                localStorage.setItem(test, test);
                localStorage.removeItem(test);
                console.log('‚úÖ localStorage is available');
                return true;
            } catch(e) {
                console.error('‚ùå localStorage is NOT available:', e);
                alert('Warning: Local storage is not available. Your data will not be saved between sessions.');
                return false;
            }
        }

        // Page Navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Highlight active nav link
            event.target.classList.add('active');
            
            // Save current page
            localStorage.setItem('currentPage', pageId);
        }

        // GPA Calculator
        let courses = [];

        function loadCourses() {
            const saved = localStorage.getItem('courses');
            if (saved) {
                try {
                    courses = JSON.parse(saved);
                    console.log('‚úÖ Loaded courses:', courses.length);
                    updateCourseList();
                    calculateGPA();
                } catch (e) {
                    console.error('Error loading courses:', e);
                    courses = [];
                }
            }
        }

        function addCourse() {
            const name = document.getElementById('courseName').value;
            const grade = parseFloat(document.getElementById('courseGrade').value);
            const credits = parseInt(document.getElementById('courseCredits').value);

            if (name && credits) {
                courses.push({ 
                    name, 
                    grade, 
                    credits,
                    id: Date.now()
                });
                saveCourses();
                updateCourseList();
                calculateGPA();
                document.getElementById('courseName').value = '';
                console.log('‚úÖ Course added:', name);
            }
        }

        function deleteCourse(index) {
            const courseName = courses[index].name;
            courses.splice(index, 1);
            saveCourses();
            updateCourseList();
            calculateGPA();
            console.log('‚úÖ Course deleted:', courseName);
        }

        function saveCourses() {
            try {
                localStorage.setItem('courses', JSON.stringify(courses));
                console.log('‚úÖ Courses saved to localStorage');
            } catch (e) {
                console.error('Error saving courses:', e);
                alert('Failed to save courses. Storage may be full.');
            }
        }

        function updateCourseList() {
            const list = document.getElementById('courseList');
            list.innerHTML = courses.map((course, index) => `
                <div class="course-item">
                    <div>
                        <strong>${course.name}</strong><br>
                        <small>Grade: ${course.grade.toFixed(1)} | Credits: ${course.credits}</small>
                    </div>
                    <button class="delete-btn" onclick="deleteCourse(${index})">Delete</button>
                </div>
            `).join('');
        }

        function calculateGPA() {
            let totalPoints = 0;
            let totalCredits = 0;

            courses.forEach(course => {
                totalPoints += course.grade * course.credits;
                totalCredits += course.credits;
            });

            const gpa = totalCredits > 0 ? (totalPoints / totalCredits).toFixed(2) : '0.00';
            document.getElementById('gpaDisplay').textContent = gpa;
            document.getElementById('totalCredits').textContent = totalCredits;
        }

        // Assignment Tracker
        let assignments = [];

        function loadAssignments() {
            const saved = localStorage.getItem('assignments');
            if (saved) {
                try {
                    assignments = JSON.parse(saved);
                    console.log('‚úÖ Loaded assignments:', assignments.length);
                    updateAssignmentList();
                } catch (e) {
                    console.error('Error loading assignments:', e);
                    assignments = [];
                }
            }
        }

        function addAssignment() {
            const name = document.getElementById('assignmentName').value;
            const course = document.getElementById('assignmentCourse').value;
            const due = document.getElementById('assignmentDue').value;
            const priority = document.getElementById('assignmentPriority').value;
            const alarm = document.getElementById('assignmentAlarm').checked;

            if (name && course && due) {
                assignments.push({ 
                    name, 
                    course, 
                    due, 
                    priority, 
                    alarm,
                    completed: false,
                    id: Date.now()
                });
                assignments.sort((a, b) => new Date(a.due) - new Date(b.due));
                saveAssignments();
                updateAssignmentList();
                
                document.getElementById('assignmentName').value = '';
                document.getElementById('assignmentCourse').value = '';
                document.getElementById('assignmentDue').value = '';
                document.getElementById('assignmentAlarm').checked = true;
                console.log('‚úÖ Assignment added:', name);
            }
        }

        function toggleAssignment(index) {
            assignments[index].completed = !assignments[index].completed;
            saveAssignments();
            updateAssignmentList();
        }

        function deleteAssignment(index) {
            const assignmentName = assignments[index].name;
            assignments.splice(index, 1);
            saveAssignments();
            updateAssignmentList();
            console.log('‚úÖ Assignment deleted:', assignmentName);
        }

        function saveAssignments() {
            try {
                localStorage.setItem('assignments', JSON.stringify(assignments));
                console.log('‚úÖ Assignments saved to localStorage');
            } catch (e) {
                console.error('Error saving assignments:', e);
                alert('Failed to save assignments.');
            }
        }

        function updateAssignmentList() {
            const list = document.getElementById('assignmentList');
            if (assignments.length === 0) {
                list.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">No assignments yet. Add your first one above!</p>';
                return;
            }
            
            list.innerHTML = assignments.map((assignment, index) => {
                const dueDate = new Date(assignment.due);
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const dueDateOnly = new Date(dueDate);
                dueDateOnly.setHours(0, 0, 0, 0);
                const daysUntil = Math.ceil((dueDateOnly - today) / (1000 * 60 * 60 * 24));
                
                let dueText;
                if (daysUntil < 0) {
                    dueText = `<span style="color: #e74c3c;">Overdue by ${Math.abs(daysUntil)} days</span>`;
                } else if (daysUntil === 0) {
                    dueText = '<span style="color: #e74c3c; font-weight: bold;">Due Today!</span>';
                } else if (daysUntil === 1) {
                    dueText = '<span style="color: #f39c12;">Due Tomorrow</span>';
                } else {
                    dueText = `Due in ${daysUntil} days`;
                }

                const alarmBadge = assignment.alarm ? '<span class="alarm-badge">üîî Alarm</span>' : '';
                
                return `
                <div class="assignment-item priority-${assignment.priority} ${assignment.completed ? 'completed' : ''}">
                    <div>
                        <strong>${assignment.name}</strong>${alarmBadge}<br>
                        <small>${assignment.course} | ${dueText}</small>
                    </div>
                    <div>
                        <button onclick="toggleAssignment(${index})" style="margin-right: 5px; padding: 5px 10px; font-size: 12px;">
                            ${assignment.completed ? '‚Ü©Ô∏è' : '‚úì'}
                        </button>
                        <button class="delete-btn" onclick="deleteAssignment(${index})">Delete</button>
                    </div>
                </div>
            `}).join('');
        }

        // Study Timer
        let timerInterval;
        let timeLeft = 25 * 60;
        let isRunning = false;
        let sessionsCompleted = 0;
        let studyTime = 0;

        function loadTimerStats() {
            const savedSessions = localStorage.getItem('sessionsCompleted');
            const savedStudyTime = localStorage.getItem('studyTime');
            
            if (savedSessions !== null) {
                sessionsCompleted = parseInt(savedSessions);
            }
            if (savedStudyTime !== null) {
                studyTime = parseInt(savedStudyTime);
            }
            
            document.getElementById('sessionsCompleted').textContent = sessionsCompleted;
            document.getElementById('studyTime').textContent = studyTime;
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                timerInterval = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        updateTimerDisplay();
                    } else {
                        pauseTimer();
                        
                        if (navigator.vibrate) {
                            navigator.vibrate([200, 100, 200, 100, 200]);
                        }
                        
                        alert('Session completed! Take a break.');
                        sessionsCompleted++;
                        studyTime++;
                        
                        localStorage.setItem('sessionsCompleted', sessionsCompleted.toString());
                        localStorage.setItem('studyTime', studyTime.toString());
                        
                        document.getElementById('sessionsCompleted').textContent = sessionsCompleted;
                        document.getElementById('studyTime').textContent = studyTime;
                        resetTimer();
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);
        }

        function resetTimer() {
            pauseTimer();
            const sessionType = parseInt(document.getElementById('sessionType').value);
            timeLeft = sessionType * 60;
            updateTimerDisplay();
        }

        function changeSessionType() {
            resetTimer();
        }

        // Schedule
        let scheduleItems = [];

        function loadSchedule() {
            const saved = localStorage.getItem('schedule');
            if (saved) {
                try {
                    scheduleItems = JSON.parse(saved);
                    console.log('‚úÖ Loaded schedule items:', scheduleItems.length);
                    updateScheduleList();
                } catch (e) {
                    console.error('Error loading schedule:', e);
                    scheduleItems = [];
                }
            }
        }

        function addScheduleItem() {
            const name = document.getElementById('scheduleName').value;
            const day = document.getElementById('scheduleDay').value;
            const time = document.getElementById('scheduleTime').value;
            const location = document.getElementById('scheduleLocation').value;

            if (name && day && time) {
                scheduleItems.push({ 
                    name, 
                    day, 
                    time, 
                    location,
                    id: Date.now()
                });
                scheduleItems.sort((a, b) => {
                    const dayOrder = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                    const dayDiff = dayOrder.indexOf(a.day) - dayOrder.indexOf(b.day);
                    if (dayDiff !== 0) return dayDiff;
                    return a.time.localeCompare(b.time);
                });
                saveSchedule();
                updateScheduleList();
                
                document.getElementById('scheduleName').value = '';
                document.getElementById('scheduleTime').value = '';
                document.getElementById('scheduleLocation').value = '';
                console.log('‚úÖ Schedule item added:', name);
            }
        }

        function deleteScheduleItem(index) {
            const itemName = scheduleItems[index].name;
            scheduleItems.splice(index, 1);
            saveSchedule();
            updateScheduleList();
            console.log('‚úÖ Schedule item deleted:', itemName);
        }

        function saveSchedule() {
            try {
                localStorage.setItem('schedule', JSON.stringify(scheduleItems));
                console.log('‚úÖ Schedule saved to localStorage');
            } catch (e) {
                console.error('Error saving schedule:', e);
                alert('Failed to save schedule.');
            }
        }

        function updateScheduleList() {
            const list = document.getElementById('scheduleList');
            if (scheduleItems.length === 0) {
                list.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">No schedule items yet. Add your first class above!</p>';
                return;
            }
            
            list.innerHTML = scheduleItems.map((item, index) => `
                <div class="schedule-item">
                    <div>
                        <strong>${item.name}</strong><br>
                        <small>${item.day}, ${item.time} | ${item.location || 'No location'}</small>
                    </div>
                    <button class="delete-btn" onclick="deleteScheduleItem(${index})">Delete</button>
                </div>
            `).join('');
        }

        // Formulas System
        const defaultFormulas = {
            electricity: [
                { name: "Ohm's Law", formula: "V = IR" },
                { name: "Power", formula: "P = IV = V¬≤/R = I¬≤R" },
                { name: "Coulomb's Law", formula: "F = k(q‚ÇÅq‚ÇÇ)/r¬≤" },
                { name: "Capacitance", formula: "C = Q/V" },
                { name: "Resistance (series)", formula: "R_total = R‚ÇÅ + R‚ÇÇ + R‚ÇÉ" },
                { name: "Resistance (parallel)", formula: "1/R_total = 1/R‚ÇÅ + 1/R‚ÇÇ + 1/R‚ÇÉ" }
            ],
            motion: [
                { name: "Newton's 2nd Law", formula: "F = ma" },
                { name: "Velocity", formula: "v = v‚ÇÄ + at" },
                { name: "Position", formula: "x = x‚ÇÄ + v‚ÇÄt + ¬Ωat¬≤" },
                { name: "Momentum", formula: "p = mv" },
                { name: "Impulse", formula: "J = FŒît = Œîp" },
                { name: "Centripetal Force", formula: "F = mv¬≤/r" },
                { name: "Angular Velocity", formula: "œâ = Œ∏/t" }
            ],
            energy: [
                { name: "Kinetic Energy", formula: "KE = ¬Ωmv¬≤" },
                { name: "Potential Energy", formula: "PE = mgh" },
                { name: "Work", formula: "W = F¬∑d¬∑cos(Œ∏)" },
                { name: "Power", formula: "P = W/t = F¬∑v" },
                { name: "Elastic Potential", formula: "PE = ¬Ωkx¬≤" },
                { name: "Conservation", formula: "KE‚ÇÅ + PE‚ÇÅ = KE‚ÇÇ + PE‚ÇÇ" }
            ],
            fluids: [
                { name: "Bernoulli's Equation", formula: "P + ¬ΩœÅv¬≤ + œÅgh = constant" },
                { name: "Continuity", formula: "A‚ÇÅv‚ÇÅ = A‚ÇÇv‚ÇÇ" },
                { name: "Pressure", formula: "P = F/A" },
                { name: "Hydrostatic Pressure", formula: "P = œÅgh" },
                { name: "Buoyancy", formula: "F_b = œÅ_fluid¬∑V_displaced¬∑g" },
                { name: "Flow Rate", formula: "Q = A¬∑v" }
            ],
            materials: [
                { name: "Stress", formula: "œÉ = F/A" },
                { name: "Strain", formula: "Œµ = ŒîL/L‚ÇÄ" },
                { name: "Young's Modulus", formula: "E = œÉ/Œµ" },
                { name: "Shear Stress", formula: "œÑ = F/A" },
                { name: "Hooke's Law", formula: "F = kx" },
                { name: "Moment of Inertia", formula: "I = ‚à´r¬≤dA" }
            ],
            thermo: [
                { name: "Ideal Gas Law", formula: "PV = nRT" },
                { name: "1st Law of Thermo", formula: "ŒîU = Q - W" },
                { name: "Heat Transfer", formula: "Q = mcŒîT" },
                { name: "Thermal Expansion", formula: "ŒîL = Œ±L‚ÇÄŒîT" },
                { name: "Efficiency", formula: "Œ∑ = W_out/Q_in" },
                { name: "Entropy", formula: "ŒîS = Q/T" }
            ]
        };

        let customFormulas = {};
        let customCategories = [];

        function loadFormulas() {
            const saved = localStorage.getItem('editedFormulas');
            if (saved) {
                try {
                    const edited = JSON.parse(saved);
                    Object.keys(edited).forEach(category => {
                        if (defaultFormulas[category]) {
                            defaultFormulas[category] = edited[category];
                        }
                    });
                } catch (e) {
                    console.error('Error loading edited formulas:', e);
                }
            }

            const savedCustom = localStorage.getItem('customFormulas');
            if (savedCustom) {
                try {
                    customFormulas = JSON.parse(savedCustom);
                    console.log('‚úÖ Loaded custom formulas');
                } catch (e) {
                    console.error('Error loading custom formulas:', e);
                    customFormulas = {};
                }
            }

            const savedCategories = localStorage.getItem('customCategories');
            if (savedCategories) {
                try {
                    customCategories = JSON.parse(savedCategories);
                    updateCategoryDropdown();
                } catch (e) {
                    console.error('Error loading custom categories:', e);
                    customCategories = [];
                }
            }

            renderAllFormulas();
        }

        function renderAllFormulas() {
            // Render default categories
            Object.keys(defaultFormulas).forEach(category => {
                const container = document.getElementById(category);
                if (container) {
                    container.innerHTML = defaultFormulas[category].map((item, index) => `
                        <div class="formula-card">
                            <strong>${item.name}:</strong> ${item.formula}
                            <button class="edit-formula-btn" onclick="editFormula('${category}', ${index})">‚úèÔ∏è</button>
                        </div>
                    `).join('');
                }
            });

            // Render custom formulas
            renderCustomFormulas();
        }

        function renderCustomFormulas() {
            const container = document.getElementById('customCategoriesList');
            let html = '';

            Object.keys(customFormulas).forEach(category => {
                if (customFormulas[category] && customFormulas[category].length > 0) {
                    const icon = getCategoryIcon(category);
                    html += `
                        <div style="margin-top: 30px;">
                            <h3 style="color: #667eea; margin-bottom: 15px;">${icon} ${formatCategoryName(category)}</h3>
                    `;
                    
                    customFormulas[category].forEach((item, index) => {
                        html += `
                            <div class="formula-card">
                                <strong>${item.name}:</strong> ${item.formula}
                                <button class="delete-btn" onclick="deleteCustomFormula('${category}', ${index})" style="float: right;">Delete</button>
                            </div>
                        `;
                    });
                    
                    html += '</div>';
                }
            });

            container.innerHTML = html || '<p style="color: #999; text-align: center; padding: 20px;">No custom formulas yet. Add your first one above!</p>';
        }

        function getCategoryIcon(category) {
            const icons = {
                electricity: '‚ö°',
                motion: 'üöÄ',
                energy: 'üí°',
                fluids: 'üíß',
                materials: 'üîß',
                thermo: 'üî•'
            };
            return icons[category] || 'üìê';
        }

        function formatCategoryName(category) {
            return category.charAt(0).toUpperCase() + category.slice(1);
        }

        function showFormulaCategory(category) {
            document.querySelectorAll('.formula-category').forEach(cat => {
                cat.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(category).classList.add('active');
            event.target.classList.add('active');
        }

        function editFormula(category, index) {
            const currentFormula = defaultFormulas[category][index];
            const newFormulaText = prompt(`Edit formula for "${currentFormula.name}":`, currentFormula.formula);
            
            if (newFormulaText !== null && newFormulaText.trim() !== '') {
                defaultFormulas[category][index].formula = newFormulaText.trim();
                saveEditedFormulas();
                renderAllFormulas();
                console.log('‚úÖ Formula edited:', currentFormula.name);
            }
        }

        function saveEditedFormulas() {
            try {
                localStorage.setItem('editedFormulas', JSON.stringify(defaultFormulas));
                console.log('‚úÖ Edited formulas saved');
            } catch (e) {
                console.error('Error saving edited formulas:', e);
            }
        }

        function addCustomFormula() {
            const name = document.getElementById('customFormulaName').value;
            const formula = document.getElementById('customFormulaText').value;
            const categorySelect = document.getElementById('customFormulaCategory');
            let category = categorySelect.value;

            if (!name || !formula) {
                alert('Please enter both name and formula');
                return;
            }

            if (category === 'new') {
                const newCat = document.getElementById('newCategoryName').value.trim().toLowerCase();
                if (!newCat) {
                    alert('Please enter a new category name');
                    return;
                }
                category = newCat;
                if (!customCategories.includes(category)) {
                    customCategories.push(category);
                    saveCustomCategories();
                    updateCategoryDropdown();
                }
            }

            if (!customFormulas[category]) {
                customFormulas[category] = [];
            }

            customFormulas[category].push({ name, formula, id: Date.now() });
            saveCustomFormulas();
            renderCustomFormulas();
            
            document.getElementById('customFormulaName').value = '';
            document.getElementById('customFormulaText').value = '';
            console.log('‚úÖ Custom formula added:', name);
        }

        function deleteCustomFormula(category, index) {
            if (confirm('Delete this formula?')) {
                const formulaName = customFormulas[category][index].name;
                customFormulas[category].splice(index, 1);
                
                if (customFormulas[category].length === 0) {
                    delete customFormulas[category];
                }
                
                saveCustomFormulas();
                renderCustomFormulas();
                console.log('‚úÖ Custom formula deleted:', formulaName);
            }
        }

        function saveCustomFormulas() {
            try {
                localStorage.setItem('customFormulas', JSON.stringify(customFormulas));
                console.log('‚úÖ Custom formulas saved');
            } catch (e) {
                console.error('Error saving custom formulas:', e);
            }
        }

        function saveCustomCategories() {
            try {
                localStorage.setItem('customCategories', JSON.stringify(customCategories));
            } catch (e) {
                console.error('Error saving custom categories:', e);
            }
        }

        function updateCategoryDropdown() {
            const select = document.getElementById('customFormulaCategory');
            const currentValue = select.value;
            
            let html = '<option value="new">‚ûï Create New Category</option>';
            html += '<option value="electricity">‚ö° Electricity</option>';
            html += '<option value="motion">üöÄ Motion</option>';
            html += '<option value="energy">üí° Energy</option>';
            html += '<option value="fluids">üíß Fluids</option>';
            html += '<option value="materials">üîß Materials</option>';
            html += '<option value="thermo">üî• Thermo</option>';
            
            customCategories.forEach(cat => {
                html += `<option value="${cat}">üìê ${formatCategoryName(cat)}</option>`;
            });
            
            select.innerHTML = html;
            if (currentValue) {
                select.value = currentValue;
            }
        }

        // Show/hide new category input
        document.addEventListener('DOMContentLoaded', function() {
            const categorySelect = document.getElementById('customFormulaCategory');
            const newCategoryGroup = document.getElementById('newCategoryGroup');
            
            categorySelect.addEventListener('change', function() {
                if (this.value === 'new') {
                    newCategoryGroup.style.display = 'block';
                } else {
                    newCategoryGroup.style.display = 'none';
                }
            });
        });

        // Notes System
        let notes = [];
        let currentNoteFilter = 'all';

        function loadNotes() {
            const saved = localStorage.getItem('notes');
            if (saved) {
                try {
                    notes = JSON.parse(saved);
                    console.log('‚úÖ Loaded notes:', notes.length);
                    updateNotesList();
                } catch (e) {
                    console.error('Error loading notes:', e);
                    notes = [];
                }
            }
        }

        function addNote() {
            const title = document.getElementById('noteTitle').value;
            const content = document.getElementById('noteContent').value;
            const branch = document.getElementById('noteBranch').value;

            if (title && content) {
                notes.unshift({
                    title,
                    content,
                    branch,
                    date: new Date().toLocaleString(),
                    id: Date.now(),
                    expanded: false
                });
                saveNotes();
                updateNotesList();
                
                document.getElementById('noteTitle').value = '';
                document.getElementById('noteContent').value = '';
                document.getElementById('noteBranch').value = 'electricity';
                console.log('‚úÖ Note added:', title);
            } else {
                alert('Please enter both title and content');
            }
        }

        function toggleNote(index) {
            const filteredNotes = getFilteredNotes();
            const note = filteredNotes[index];
            const noteCard = document.querySelector(`[data-note-id="${note.id}"]`);
            noteCard.classList.toggle('expanded');
        }

        function editNote(index) {
            const filteredNotes = getFilteredNotes();
            const note = filteredNotes[index];
            
            // Find original index in full notes array
            const originalIndex = notes.findIndex(n => n.id === note.id);
            
            document.getElementById('noteTitle').value = note.title;
            document.getElementById('noteContent').value = note.content;
            document.getElementById('noteBranch').value = note.branch;
            
            notes.splice(originalIndex, 1);
            saveNotes();
            updateNotesList();
        }

        function deleteNote(index) {
            if (confirm('Delete this note?')) {
                const filteredNotes = getFilteredNotes();
                const note = filteredNotes[index];
                
                // Find original index in full notes array
                const originalIndex = notes.findIndex(n => n.id === note.id);
                const noteTitle = notes[originalIndex].title;
                
                notes.splice(originalIndex, 1);
                saveNotes();
                updateNotesList();
                console.log('‚úÖ Note deleted:', noteTitle);
            }
        }

        function filterNotes(branch) {
            currentNoteFilter = branch;
            
            // Update active filter button
            document.querySelectorAll('.note-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateNotesList();
        }

        function getFilteredNotes() {
            if (currentNoteFilter === 'all') {
                return notes;
            }
            return notes.filter(note => note.branch === currentNoteFilter);
        }

        function getBranchLabel(branch) {
            const labels = {
                electricity: '‚ö° Electricity',
                motion: 'üöÄ Motion',
                energy: 'üí° Energy',
                fluids: 'üíß Fluids',
                materials: 'üîß Materials',
                thermo: 'üî• Thermo',
                general: 'üìö General'
            };
            return labels[branch] || branch;
        }

        function saveNotes() {
            try {
                localStorage.setItem('notes', JSON.stringify(notes));
                console.log('‚úÖ Notes saved');
            } catch (e) {
                console.error('Error saving notes:', e);
                alert('Failed to save notes.');
            }
        }

        function updateNotesList() {
            const list = document.getElementById('notesList');
            const filteredNotes = getFilteredNotes();
            
            if (filteredNotes.length === 0) {
                if (currentNoteFilter === 'all') {
                    list.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">No notes yet. Create your first note above!</p>';
                } else {
                    list.innerHTML = `<p style="color: #999; text-align: center; padding: 20px;">No notes in ${getBranchLabel(currentNoteFilter)} category.</p>`;
                }
                return;
            }
            
            list.innerHTML = filteredNotes.map((note, index) => `
                <div class="note-card branch-${note.branch}" data-note-id="${note.id}">
                    <div class="note-card-header" onclick="toggleNote(${index})">
                        <div class="note-card-title-section">
                            <div class="note-card-title">
                                ${note.title}
                                <span class="note-branch-badge branch-${note.branch}">${getBranchLabel(note.branch)}</span>
                            </div>
                            <div class="note-card-date">${note.date}</div>
                        </div>
                        <div class="note-expand-icon">‚ñº</div>
                    </div>
                    <div class="note-card-content">
                        <div class="note-card-text">${note.content}</div>
                        <div class="note-actions">
                            <button class="edit-btn" onclick="editNote(${index})">Edit</button>
                            <button class="delete-btn" onclick="deleteNote(${index})">Delete</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Dashboard initializing...');
            
            if (!testLocalStorage()) {
                return;
            }
            
            // Load all data
            loadCourses();
            loadAssignments();
            loadSchedule();
            loadNotes();
            loadTimerStats();
            loadFormulas();
            updateTimerDisplay();
            
            // Restore last page
            const lastPage = localStorage.getItem('currentPage');
            if (lastPage) {
                const pageBtn = document.querySelector(`[onclick="showPage('${lastPage}')"]`);
                if (pageBtn) {
                    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    document.getElementById(lastPage).classList.add('active');
                    pageBtn.classList.add('active');
                }
            }
            
            console.log('‚úÖ Dashboard fully loaded!');
        });
    </script>
</body>
</html>